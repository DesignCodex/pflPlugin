(function(){"use strict";var S=['a[href]:not([tabindex^="-"])','area[href]:not([tabindex^="-"])','input:not([type="hidden"]):not([type="radio"]):not([disabled]):not([tabindex^="-"])','input[type="radio"]:not([disabled]):not([tabindex^="-"])','select:not([disabled]):not([tabindex^="-"])','textarea:not([disabled]):not([tabindex^="-"])','button:not([disabled]):not([tabindex^="-"])','iframe:not([tabindex^="-"])','audio[controls]:not([tabindex^="-"])','video[controls]:not([tabindex^="-"])','[contenteditable]:not([tabindex^="-"])','[tabindex]:not([tabindex^="-"])'],E="Tab",A="Escape";function s(t){this._show=this.show.bind(this),this._hide=this.hide.bind(this),this._maintainFocus=this._maintainFocus.bind(this),this._bindKeypress=this._bindKeypress.bind(this),this.$el=t,this.shown=!1,this._id=this.$el.getAttribute("data-a11y-dialog")||this.$el.id,this._previouslyFocused=null,this._listeners={},this.create()}s.prototype.create=function(){this.$el.setAttribute("aria-hidden",!0),this.$el.setAttribute("aria-modal",!0),this.$el.setAttribute("tabindex",-1),this.$el.hasAttribute("role")||this.$el.setAttribute("role","dialog"),this._openers=c('[data-a11y-dialog-show="'+this._id+'"]'),this._openers.forEach(function(e){e.addEventListener("click",this._show)}.bind(this));const t=this.$el;return this._closers=c("[data-a11y-dialog-hide]",this.$el).filter(function(e){return e.closest('[aria-modal="true"], [data-a11y-dialog]')===t}).concat(c('[data-a11y-dialog-hide="'+this._id+'"]')),this._closers.forEach(function(e){e.addEventListener("click",this._hide)}.bind(this)),this._fire("create"),this},s.prototype.show=function(t){return this.shown?this:(this._previouslyFocused=document.activeElement,this.$el.removeAttribute("aria-hidden"),this.shown=!0,_(this.$el),document.body.addEventListener("focus",this._maintainFocus,!0),document.addEventListener("keydown",this._bindKeypress),this._fire("show",t),this)},s.prototype.hide=function(t){return this.shown?(this.shown=!1,this.$el.setAttribute("aria-hidden","true"),this._previouslyFocused&&this._previouslyFocused.focus&&this._previouslyFocused.focus(),document.body.removeEventListener("focus",this._maintainFocus,!0),document.removeEventListener("keydown",this._bindKeypress),this._fire("hide",t),this):this},s.prototype.destroy=function(){return this.hide(),this._openers.forEach(function(t){t.removeEventListener("click",this._show)}.bind(this)),this._closers.forEach(function(t){t.removeEventListener("click",this._hide)}.bind(this)),this._fire("destroy"),this._listeners={},this},s.prototype.on=function(t,e){return typeof this._listeners[t]>"u"&&(this._listeners[t]=[]),this._listeners[t].push(e),this},s.prototype.off=function(t,e){var o=(this._listeners[t]||[]).indexOf(e);return o>-1&&this._listeners[t].splice(o,1),this},s.prototype._fire=function(t,e){var o=this._listeners[t]||[],i=new CustomEvent(t,{detail:e});this.$el.dispatchEvent(i),o.forEach(function(r){r(this.$el,e)}.bind(this))},s.prototype._bindKeypress=function(t){const e=document.activeElement;e&&e.closest('[aria-modal="true"]')!==this.$el||(this.shown&&t.key===A&&this.$el.getAttribute("role")!=="alertdialog"&&(t.preventDefault(),this.hide(t)),this.shown&&t.key===E&&B(this.$el,t))},s.prototype._maintainFocus=function(t){this.shown&&!t.target.closest('[aria-modal="true"]')&&!t.target.closest("[data-a11y-dialog-ignore-focus-trap]")&&_(this.$el)};function T(t){return Array.prototype.slice.call(t)}function c(t,e){return T((e||document).querySelectorAll(t))}function _(t){var e=t.querySelector("[autofocus]")||t;e.focus()}function F(t){return c(S.join(","),t).filter(function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})}function B(t,e){var o=F(t),i=o.indexOf(document.activeElement);e.shiftKey&&i===0?(o[o.length-1].focus(),e.preventDefault()):!e.shiftKey&&i===o.length-1&&(o[0].focus(),e.preventDefault())}function w(){c("[data-a11y-dialog]").forEach(function(t){new s(t)})}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16));let b=!1;if(typeof window<"u"){const t={get passive(){b=!0}};window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}const p=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);let d=[],n=new Map,y=!1,x=-1,u,h,l,f;const $=t=>d.some(e=>!!(e.options.allowTouchMove&&e.options.allowTouchMove(t))),v=t=>{const e=t||window.event;return $(e.target)||e.touches.length>1?!0:(e.preventDefault&&e.preventDefault(),!1)},L=t=>{if(f===void 0){const e=!!t&&t.reserveScrollBarGap===!0,o=window.innerWidth-document.documentElement.clientWidth;if(e&&o>0){const i=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);f=document.body.style.paddingRight,document.body.style.paddingRight=`${i+o}px`}}u===void 0&&(u=document.body.style.overflow,document.body.style.overflow="hidden")},D=()=>{f!==void 0&&(document.body.style.paddingRight=f,f=void 0),u!==void 0&&(document.body.style.overflow=u,u=void 0)},P=()=>window.requestAnimationFrame(()=>{const t=document.documentElement,e=document.body;if(l===void 0){h={...t.style},l={...e.style};const{scrollY:o,scrollX:i,innerHeight:r}=window;t.style.height="100%",t.style.overflow="hidden",e.style.position="fixed",e.style.top=`${-o}px`,e.style.left=`${-i}px`,e.style.width="100%",e.style.height="auto",e.style.overflow="hidden",setTimeout(()=>window.requestAnimationFrame(()=>{const m=r-window.innerHeight;m&&o>=r&&(e.style.top=-(o+m)+"px")}),300)}}),k=()=>{if(l!==void 0){const t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10),o=document.documentElement,i=document.body;o.style.height=(h==null?void 0:h.height)||"",o.style.overflow=(h==null?void 0:h.overflow)||"",i.style.position=l.position||"",i.style.top=l.top||"",i.style.left=l.left||"",i.style.width=l.width||"",i.style.height=l.height||"",i.style.overflow=l.overflow||"",window.scrollTo(e,t),l=void 0}},I=t=>t?t.scrollHeight-t.scrollTop<=t.clientHeight:!1,K=(t,e)=>{const o=t.targetTouches[0].clientY-x;return $(t.target)?!1:e&&e.scrollTop===0&&o>0||I(e)&&o<0?v(t):(t.stopPropagation(),!0)},O=(t,e)=>{if(!t){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(n.set(t,n!=null&&n.get(t)?(n==null?void 0:n.get(t))+1:1),d.some(i=>i.targetElement===t))return;const o={targetElement:t,options:e||{}};d=[...d,o],p?P():L(e),p&&(t.ontouchstart=i=>{i.targetTouches.length===1&&(x=i.targetTouches[0].clientY)},t.ontouchmove=i=>{i.targetTouches.length===1&&K(i,t)},y||(document.addEventListener("touchmove",v,b?{passive:!1}:void 0),y=!0))},q=t=>{if(!t){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}n.set(t,n!=null&&n.get(t)?(n==null?void 0:n.get(t))-1:0),(n==null?void 0:n.get(t))===0&&(d=d.filter(e=>e.targetElement!==t),n==null||n.delete(t)),p&&(t.ontouchstart=null,t.ontouchmove=null,y&&d.length===0&&(document.removeEventListener("touchmove",v,b?{passive:!1}:void 0),y=!1)),d.length===0&&(p?k():D())};function C(){const t={},e=["pfl-modal-publication-facts-label","pfl-modal-for-other-journals","pfl-modal-publisher","pfl-modal-for-other-articles","pfl-modal-indexes","pfl-modal-editorial-team","pfl-modal-articles-accepted","pfl-modal-peer-reviewers","pfl-modal-competing-interests","pfl-modal-competing-interests-data","pfl-modal-data-availability","pfl-modal-funders"];let o=[];e.forEach(function(i){t[i]=new s(document.getElementById(i)),t[i].on("show",function(r,m){const a=r.id;o.includes(a)||o.push(a),o.length===2&&t[o[0]].hide();const g=document.querySelector("#"+a+" .pfl-dialog-content");O(g)}),t[i].on("hide",function(r,m){const a=r.id,g=document.querySelector("#"+a+" .pfl-dialog-content");q(g),o[o.length-1]===a&&(o.pop(),o.length&&t[o[0]].show())})})}C()})();
